In order to run the matlab code "non_local.m" (non local means denoising), please download the "signal toolbox" and "general toolbox" provided by Grabriel Peyre:
https://www.ceremade.dauphine.fr/~peyre/numerical-tour/tours/denoisingadv_6_nl_means/
(don't forget to add "code/lib" to path)
